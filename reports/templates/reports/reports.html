{% extends "base.html" %}

{% block page_content %}

<style>
.tables-container {
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	gap: 10px;
}
table {
	border: 1px solid black;
	border-collapse: separate;
	border-spacing: 0;
	width: auto;
	border-radius: 10px;
}
th, td {
	border: 1px solid black;
	padding: 8px; 
	text-align: left;
}
</style>

<h1>Reports Page</h1>
<p>Review reports from your budget</p>

<h3>Monthly Report for {{ month }}/{{ year }}</h3>

<!-- select month to report --> 
<form method="get">
	<label for="month">Month</lable>
	<select id="month" name="month">
		{% for m in months %}
			<option value="{{ m }}" {% if m == month %}selected{% endif %}>{{ m }}</option>
		{% endfor %}
	</select>
	<label for="year">Year:</label>
	<input type="number" id="year" name="year" value="{{ year }}">
	<button type="submit">View Report</button>
</form>

<!-- transactions tabel breakdown -->
<table>
	<thead>
		<tr>
			{% for supercat in supercategories %}			<th>{{ supercat }}</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		<tr>
			<!-- this is the totals for supercategories --> 
			{% for name, value in supercat_totals_list %}
				<td>{{ value }}</td>
			{% endfor %}
		</tr>

		
<!-- this tables of transactions by category in each supercat -->
<div class="tables-container">
			{% for supercat in category_by_supercat_list %}
				<table>
					<thead>
						<tr>
							<th style="border: none;">{{ supercat.0.0 }}</th>
						</tr>
					</thead>
					<body>
						{% for cat in supercat %}	
							<tr>
								<td>
									<p>{{ cat.1 }}: {{ cat.2 }}</p>
								</td>
								<td>
									<p>Budget:{{ cat.3 }}</p>
								</td>
								<td>
									<p>Target: {{ cat.3 }}</p>
								</td>
							</tr>
						{% endfor %}
					</body>
				</table>
		{% endfor %}
</div>

{% endblock page_content %}
