{% extends "base.html" %}

{% block page_content %}


<h1>Reports Page</h1>
<p>Review reports from your budget</p>

<div>
		<nav>
			<a href="{% url 'reports_index' %}" >Back to Reports</a>
		</nav>
</div>

<h3>Monthly Report for {{ month }}/{{ year }}</h3>

<!-- select month to report --> 
<form method="get">
	<label for="month">Month</lable>
	<select id="month" name="month">
		{% for m in months %}
			<option value="{{ m }}" {% if m == month %}selected{% endif %}>{{ m }}</option>
		{% endfor %}
	</select>
	<label for="year">Year:</label>
	<input type="number" id="year" name="year" value="{{ year }}">
	<button type="submit">View Report</button>
</form>

<!-- transactions tabel breakdown -->
<table>
	<thead>
		<tr>
			{% for supercat in supercategories %}			<th>{{ supercat }}</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		<tr>
			<!-- this is the totals for supercategories --> 
			{% for name, value in supercat_totals_list %}
				<td>{{ value }}</td>
			{% endfor %}
	</tr>
</table>

		
<!-- this tables of transactions by category in each supercat -->
<div class="tables-container">
			{% for supercat in category_by_supercat_list %}
				<table class="cat_by_supercat">
					<thead>
						<tr>
							<th>{{ supercat.0.0 }}</th>
						</tr>
					</thead>
					<body>
						{% for cat in supercat %}	
							<tr>
								<td class="cat_by_supercat_cell">
									<p>{{ cat.1 }}: {{ cat.2 }}</p>
								</td>
								<td class="cat_by_supercat_cell">
									<p>Budget:{{ cat.3 }}</p>
								</td>
								<td style="{% if cat.4 > 0 %}font-weight: bold;
																						 color: green;
													 {% else %}font-weight: bold;
													 					 color: red;
													 {% endif %}"
													 class="cat_by_supercat_cell">
									<p>Target: {{ cat.4 }}</p>
								</td>
							</tr>
						{% endfor %}
					</body>
				</table>
		{% endfor %}
</div>

{% endblock page_content %}
